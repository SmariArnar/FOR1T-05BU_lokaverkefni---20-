#Smári Arnarson og Friðrik fannar
#Lokaverkefni í öðrum áfanga forritun
#importum hér random breytu.
import time
from random import *
from random import shuffle
class Hrutur:
    def __init__(self,nafn,thyngd,mjolk,ull,afkvaemi,laeri,frjosemi,bak,malars):
        self.nafn = nafn
        self.thyngd = thyngd
        self.mjolk = mjolk
        self.ull = ull
        self.afkvaemi = afkvaemi
        self.laeri = laeri
        self.frjosemi = frjosemi
        self.bak = bak
        self.malars = malars
hrutur = Hrutur
teljari = 1
#Hér bý ég til lista með hrútapsilunum sem ég appenda í, frá texta möppunum.
hrutalisti = []
#Hér verða allir hrútar áður enn þeir verða settir í hendurnar á þeim sem eru að spila
heildarstokkur = []
tolva = []
notandi = []
'''
    #Áður en ég byrja á að gera þetta bý ég til texta möppu sem inniheldur
    #hrútaspilin. Með þessari skipun fyrir neðan opna ég skjalið
    #svo þarf ég að ákveða hvað það á að gera við það.
'''
with open("hrutaspil.txt","r", encoding="utf-8") as f:
    for line in f:
        '''
            #Hér set ég listann úr texta skjalinu í lista ti að nota
            #hann í framtíðinni og nota hann til að spila leikinn.
        '''
        hrutalisti.append(eval(line))
'''
    #Hér er tekið hlutina úr Hrúta skjalinu og búið til hrúta með smiðinum
    #Það er líka sett í lista sem helur öllum spilunum
'''
for x in range(len(hrutalisti)):
    for i in hrutalisti[x]:
        buatil_hrut = hrutur(i, hrutalisti[x][i][0], hrutalisti[x][i][1], hrutalisti[x][i][2], hrutalisti[x][i][3],hrutalisti[x][i][4], hrutalisti[x][i][5], hrutalisti[x][i][6], hrutalisti[x][i][7])
        heildarstokkur.append(buatil_hrut)
'''
    # Hér er listi sem inniheldur spil bæði frá,
    # Spilin eru í fyrirframákveðinniröð því þurfum við að
    # stokka upp í honum við getum gert þetta á einfaldan hátt,
    # með shuffle skipuninni sem ruglar stokkinn.
'''
shuffle(heildarstokkur)
#Hér er gefið báðum keppendum spil
for i in heildarstokkur:
    if len(tolva) > 26:
        tolva.append(i)
    elif len(notandi) > 26:
        notandi.append(i)
'''
    #Hér bý ég til while lykkju sem mun keyra þangað til að annaðhvort hefur
    #tapað öllum spilunum sínum, endurtekur alltaf leikröðina þangað til leikurinn klárast.
'''
while len(tolva) or len(notandi) > 0:
    '''
        #hér nota ég teljara sem fer sitt á hvað að velja flokk á notanda í tölvu,
        #það sem kemur út úr þessum tveimur if setningum heitir bæði val,
        #því flokkurinn sem er valinn fara bæði í sama proccess er þau eru valinn
        #það er að ákvarða hvaða hrútur vinnur, svo heldur þetta áfram og áfram í while lykkjunni þar til annar er búinn að tapaþ
    '''
    teljari += 1
    if teljari%2 == 0:
        '''
            #Ég set hér tvær breytur með fyrsta hrút i hverri hendi, gildin sem komu úr txt skránni
            #Til að kalla á gildi fyrir það er notað t.d. ordabok1.nafn fyrir nafn og ordabok1.thyngd fyrir þyngd
        '''
        ordabok1 = notandi[0]
        ordabok2 = tolva[0]
        print('\x1b[1;31m' + 'Nú átt þú leik!' + '\x1b[0m')
        print('\x1b[1;31m' + 'Veldu í hverju þú vilt keppa' + '\x1b[0m')
        print("Þú ert með hrútinn",ordabok1.nafn)
        print("Eiginleikar hans eru: ",ordabok1.thyngd,',',ordabok1.mjolk,',',ordabok1.ull,',',ordabok1.afkvaemi,',',ordabok1.laeri,',',ordabok1.frjosemi,',',ordabok1.bak,',',ordabok1.malars)
        time.sleep(0.5)
        #Valmynd um hvaða eiginleika notandinn vill nota, í umferðinni!
        print("0.Þyngdarstig ",ordabok1.thyngd)
        time.sleep(0.5)
        print("1.Mjólkurstig  ",ordabok1.mjolk)
        time.sleep(0.5)
        print("2.Ullarstig",ordabok1.ull)
        time.sleep(0.5)
        print("3.Afkvæmisstig",ordabok1.afkvaemi)
        time.sleep(0.5)
        print("4.Lærisstig ",ordabok1.laeri)
        time.sleep(0.5)
        print("5.Frjósemisstig",ordabok1.frjosemi)
        time.sleep(0.5)
        print("6.Bakvöðvastig",ordabok1.bak)
        time.sleep(0.5)
        print("7.Malarstig",ordabok1.malars)
        time.sleep(0.5)
        val = int(input("Sláðu inn hvað þú vilt láta hrútinn þinn keppa í: "))
        #Hér fyrir neðan er kóði sem sýnir hvað valinn eiginleiki er hár miðað við eiginleika spil hins sem hann er að keppa við!
        if val == 0:
            print("Þú valdir þér þyngdina: ", ordabok1.thyngd,"til að keppa í")
            time.sleep(1)
            print("Þyngd hrúts tölvunnar er", ordabok2.thyngd)
            time.sleep(1)
        elif val == 1:
            print("Þú valdir þér mjólkurstigið: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Mjólkurstig hrúts tölvunnar er", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 2:
            print("Þú valdir þér ullarstigið: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Ullarstig hrúts tölvunnar er: ", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 3:
            print("Þú valdir þér afkvæmastigin: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Afkvæmastig hrúts tölvunnar er:", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 4:
            print("Þú valdir þér lærisstigið: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Læristig hrúts tölvunnar er", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 5:
            print("Þú valdir þér frjóssemistigið: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Frjósemisstig hrúts tölvunnar er: ", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 6:
            print("Þú valdir þér bakvöðvastigið: ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Bakvöðvastig hrúts tölvunnar er: ", list(ordabok2[0].values())[0][val])
            time.sleep(1)
        elif val == 7:
            print("Þú valdir þér malarstigið : ", list(ordabok1[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Malarstig hrúts tölvunnar er: ", list(ordabok2[0].values())[0][val])
            time.sleep(1)
    if teljari%2 == 1:
        time.sleep(2)
        print('\x1b[1;31m' + 'Nú á tölvan leik.' + '\x1b[0m')
        ordabok2 = tolva[0]
        #nú í annari loopu fær tölvan að velja(random), hvað hún vill keppa í.
        print("Tölvan er með hrútinn", ordabok2[0].keys())
        print("Þyngdarstig ", list(ordabok2[0].values())[0][0])
        time.sleep(0.5)
        print("Mjólkurstig  ", list(ordabok2[0].values())[0][1])
        time.sleep(0.5)
        print("Ullarstig", list(ordabok2[0].values())[0][2])
        time.sleep(0.5)
        print("Afkvæmisstig", list(ordabok2[0].values())[0][3])
        time.sleep(0.5)
        print("Lærisstig ", list(ordabok2[0].values())[0][4])
        time.sleep(0.5)
        print("Frjósemisstig", list(ordabok2[0].values())[0][5])
        time.sleep(0.5)
        print("Bakvöðvastig", list(ordabok2[0].values())[0][6])
        time.sleep(0.5)
        print("Malarstig", list(ordabok2[0].values())[0][7])
        time.sleep(0.5)
        print("-----------------------------------------")
        print("Bíddu rólegur, nú er tölvan að ákveða hvað hún ætlar að keppa í.")
        time.sleep(2)
        #Hér geri ég bara random á það hvað talvan velur sér, bý svo til elif sagnir úr
        #því hvaða random tala var valinn.
        val = randint(0,7)
        #Hér fyrir neðan er kóði sem sýnir hvað valinn eiginleiki er hár miðað við eiginleika spil hins sem hann er að keppa við!
        if val == 0:
            print("Tölvan valdi sér þyngdina: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Þyngdin þín er", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 1:
            print("Tölvan valdi sér mjólkina: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Mjólkurstigið þitt")
            time.sleep(1)
            print("Mjólkurstigið þitt er", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 2:
            print("Tölvan valdi sér ullarstigið: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti ullarstiginu þínu")
            time.sleep(1)
            print("Ullarstigið þitt er: ", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 3:
            print("Tölvan valdi sér afkvæmastigin: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti afkvæmum hrútsins þíns.")
            time.sleep(1)
            print("Afkvæmastig þitt er:", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 4:
            print("Tölvan valdi sér lærisstigið: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti lærisstiginu þínu.")
            time.sleep(1)
            print("Læristigið þitt er", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 5:
            print("Tölvan valdi sér frjóssemistigið: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti frjósemisstiginu þínu.")
            time.sleep(1)
            print("Frjósemisstigið þitt er: ", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 6:
            print("Tölvan valdi sér bakvöðvastigið: ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti bakvöðvastiginu þínu.")
            time.sleep(1)
            print("Bakvörðustigið þitt er: ", list(ordabok1[0].values())[0][val])
            time.sleep(1)
        elif val == 7:
            print("Tölvan valdi sér malarstigið : ", list(ordabok2[0].values())[0][val],"til að keppa í")
            time.sleep(1)
            print("Á móti malastiginu þínu.")
            time.sleep(0.5)
            print("Malarstigið þitt er: ", list(ordabok1[0].values())[0][val])
            time.sleep(1)
    #Ef val er það sama og staðsetning gildis í lista, þá ákveður þessi kóði hver vann umferðina!
    if val != 0 and val <= 8:
        time.sleep(2)
        ordabok2 = tolva[0]
        ordabok1 = notandi[0]
        print("")
        #Ef eiginleikin sem þú valdir er stærri en eiginleikinn hjá spili tölvunnar vinnur þú og tekur spil tölvunnar!
        if list(ordabok1[0].values())[0][val] > list(ordabok2[0].values())[0][val]:
            print('\x1b[1;31m' + 'Þú vinnur þessa umferð!' + '\x1b[0m')
            print("  _     __       _                   _ ")
            time.sleep(0.05)
            print(" | |_ _/_/  __ _(_)_ _  _ _ _  _ _ _| |")
            time.sleep(0.05)
            print(" | -_) || | \ V / | ' \| ' \ || | '_|_|")
            time.sleep(0.05)
            print(" |_|  \_,_|  \_/|_|_||_|_||_\_,_|_| (_)\n")
            time.sleep(2)
            ordabok1.append(ordabok1.pop(0))
            ordabok1.append(ordabok2.pop(0))
        #Ef tölvan valdi eiginleika hrútsins sem er stærri en eiginleikinn sem notandi er með tekur tölvan spilið!
        elif list(ordabok1[0].values())[0][val] < list(ordabok2[0].values())[0][val]:
            ordabok1 = notandi[0]
            ordabok2 = tolva[0]
            print('\x1b[1;31m' + 'Tölvan vann þessa umferð!' + '\x1b[0m')
            print("  _____ _   _ _                     _                   _ ")
            time.sleep(0.05)
            print(" |_   _(_)_(_) |_ ____ _ _ _   __ _(_)_ _  _ _ _  _ _ _| |")
            time.sleep(0.05)
            print("   | |  / _ \| \ V / _` | ' \  \ V / | ' \| ' \ || | '_|_|")
            time.sleep(0.05)
            print("   |_|  \___/|_|\_/\__,_|_||_|  \_/|_|_||_|_||_\_,_|_| (_)\n")
            time.sleep(2)
            ordabok2.append(ordabok2.pop(0))
            ordabok2.append(ordabok1.pop(0))
        #Ef það kemur upp jafntefli er bara valinn einhver annara eiginleiki á hrútnm.
        elif list(ordabok1[0].values())[0][val] == list(ordabok2[0].values())[0][val]:
            print('\x1b[1;31m' + 'JAFNTEFLI!!' + '\x1b[0m')
        #Hér geta notendur séð hvernig staðan er á stokkunum í hverri loopu!
        print('\x1b[1;31m' + 'Stokkarnir eftir þessa umferð!' + '\x1b[0m')
        time.sleep(1)
        print("Eftir þessa umferð ert þú með:", len(notandi[0]), "spil.")
        time.sleep(1)
        print("Eftir þessa umferð er talvan með: ", len(tolva[0]), "spil")
        time.sleep(1)
    else:
        print("úps, villa. Veldu á milli 0 og 7 ekki hærra eða lægra.")
    #Ef annarhvort stokkurinn er tómur er hinn búinn að vinna og þessi kóði prentar hver vann spilið!
    if len(ordabok1[0]) == 0:
        print("Þú hefur tapað öllum þínum spilum og þarafleiðandi tapað spilinu.")
        print("Tölvan er með",len(ordabok2[0]),"spil.")

    elif len(ordabok2[0]) == 0:
        print("Tölvan hefur tapað öllum sínum spilum og þú hefur unnið hana")
        print("Þú endar með",len(ordabok1[0]),"spil.")













